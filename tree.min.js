"use strict";var app=angular.module("90TechSAS.angular-tree",[]);app.factory("RecursionHelper",["$compile",function($compile){return{compile:function(element,link){angular.isFunction(link)&&(link={post:link});var compiledContents,contents=element.contents().remove();return{pre:link&&link.pre?link.pre:null,post:function(scope,element){compiledContents||(compiledContents=$compile(contents)),compiledContents(scope,function(clone){element.append(clone)}),link&&link.post&&link.post.apply(null,arguments)}}}}}]),app.directive("zlTree",function(RecursionHelper){return{restrict:"E",scope:{root:"=zlTreeRoot",loadFunction:"&"},template:'<button ng-click="toggleMe()">{{toggle ? \'-\' : \'+\'}}</button><span>{{ root.id}}</span><ul ng-if="toggle"><div ng-if="loading" class="spinner"></div><li ng-if="!loading" ng-repeat="child in children"><zl-tree zl-tree-root="child" load-function="loadFunction({$id: $id})"></zl-tree></li></ul>',compile:function(element){return RecursionHelper.compile(element)},controller:function($scope){$scope.toggleMe=function(){$scope.toggle=!$scope.toggle,$scope.toggle&&!$scope.children&&($scope.loading=!0,$scope.loadFunction({$id:$scope.root.children}).then(function(data){$scope.children=data,$scope.loading=!1}))}}}});